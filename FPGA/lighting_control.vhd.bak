LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.std_logic_unsigned.all;

ENTITY LIGHTING_CONTROL IS
	PORT(
		-- Input ports
		INPUT_SIGNAL	: IN    	STD_LOGIC_VECTOR(159 DOWNTO 0);	--arbitrary input vector...
		-- Output ports
		OUTPUT_SIGNAL	: OUT		STD_LOGIC_VECTOR(159 DOWNTO 0)
		--SIGNAL LIGHTING_VAL	:		STD_LOGIC_VECTOR (7 downto 0)
	);
END ENTITY LIGHTING_CONTROL;

ARCHITECTURE archi OF LIGHTING_CONTROL IS
CONSTANT LIGHTING_HIGH	:		STD_LOGIC_VECTOR (7 downto 0)	:=		x"FF"; --or something
CONSTANT LIGHTING_LOW	:		STD_LOGIC_VECTOR (7 downto 0)	:=		x"00"; --or something
CONSTANT THRESHOLD		:		STD_LOGIC_VECTOR (15 downto 0)	:=		x"07D0"; --or something
SIGNAL LIGHTING_VAL	:		STD_LOGIC_VECTOR (7 downto 0);
BEGIN
	PROCESS(INPUT_SIGNAL)
	BEGIN
		--determine lighting val
		IF (INPUT_SIGNAL(23 downto 8)) > THRESHOLD THEN
			LIGHTING_VAL <= LIGHTING_HIGH;
		ELSE
			LIGHTING_VAL <= LIGHTING_LOW;
		END IF;
		--modify vector st OUTPUT_SIGNAL <= [INPUT_SIGNAL 159 DOWNTO 48][LIGHTING HIGH/LOW][CH2 VALUE][CH1 VALUE][INPUT_SIGNAL 8 DOWNTO 0]
		OUTPUT_SIGNAL <= INPUT_SIGNAL(159 downto 48) & LIGHTING_VAL & INPUT_SIGNAL(39 downto 0);
	END PROCESS;
END archi;